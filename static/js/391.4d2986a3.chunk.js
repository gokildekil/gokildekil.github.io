"use strict";(self.webpackChunkpiket=self.webpackChunkpiket||[]).push([[391],{5852:function(e,t,a){a.d(t,{M:function(){return p}});var n=a(885),i=a(2791),s=a(4018),r=a(919),l=a(4286),o=a(5815),c=a(184),p=function(e){var t=(0,s.Z)(),a=e.uploadPath,p=e.buttonLabel,d=e.buttonIcon,u=e.buttonTitle,m=e.dragDropMsg,f=(0,i.useState)(!1),h=(0,n.Z)(f,2),x=h[0],g=h[1];return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(r.z,{onClick:function(){return g(!x)},label:p,tooltip:u,icon:d}),(0,c.jsx)(l.V,{draggable:!1,modal:!1,header:"Import Data",visible:x,onHide:function(){return g(!1)},position:"bottom",breakpoints:{"960px":"50vw","640px":"95vw"},style:{width:"30vw"},children:(0,c.jsx)("div",{children:(0,c.jsx)(o.Q,{showUploadedFiles:!1,uploadPath:a,onUploadError:function(e){return a=e,void t.flashMsg("Upload error",a,"error");var a},onUploadCompleted:function(t){return function(t){e.onImportCompleted(t)}(t)},fileLimit:1,maxFileSize:10,accept:".csv",multiple:!1,label:m})})})]})};p.defaultProps={uploadPath:"fileuploader/upload/import",buttonLabel:"Import Data",buttonTitle:"Import Data",buttonIcon:"pi pi-print",dragDropMsg:"Choose file to import",onImportCompleted:function(){}}},5815:function(e,t,a){a.d(t,{Q:function(){return h}});var n=a(4165),i=a(5861),s=a(885),r=a(2791),l=a(1128),o=a(7162),c=a(919),p=a(894),d=a(3306),u=a(4072),m=a(6884),f=a(184),h=function(e){var t=(0,p.Z)(),a=(0,u.Z)(),h=(0,d.Z)(),x=(0,r.useRef)(null),g=(0,r.useState)([]),j=(0,s.Z)(g,2),b=j[0],v=j[1],N=(0,r.useState)([]),w=(0,s.Z)(N,2),y=w[0],C=w[1],k=(0,r.useState)(!1),D=(0,s.Z)(k,2),S=D[0],P=D[1];(0,r.useEffect)((function(){if(e.value){var t=e.value.toString().split(",");v(t)}}),[e.value]);var I=e.maxFileSize||10,_=e.fileLimit||10,M=e.multiple,F=e.accept,Z=1024*I*1024;function z(){var e=[];b.forEach((function(a){var n=a.split("\\").pop().split("/").pop(),i=n.split(".").pop().toLowerCase(),s=!1;["jpg","png","gif","jpeg","bmp"].indexOf(i)>-1&&(s=!0);var r="small";a.indexOf("temp/")>-1&&(r="");var l=t.strEllipsis(n,15);e.push({name:n,shortName:l,isImage:s,size:r,path:a})})),C(e)}function R(){e.onChange(b.toString())}function T(e){return U.apply(this,arguments)}function U(){return(U=(0,i.Z)((0,n.Z)().mark((function e(t){var i,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,-1===(i=b.indexOf(t.path))){e.next=11;break}return b.splice(i,1),v(b),z(),R(),"fileuploader/remove_temp_file",s={temp_file:t.path},e.next=11,a.post("fileuploader/remove_temp_file",s);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function E(){return e.showUploadedFiles&&y.length?(0,f.jsx)("div",{className:"flex gap-2 flex-wrap py-2",children:y.map((function(e){return(0,f.jsxs)("div",{children:[e.isImage&&(0,f.jsxs)("div",{className:"card flex justify-content-between gap-2 align-items-center p-1",children:[(0,f.jsx)(m.O,{width:"40px",height:"40px",imageSize:"small",src:e.path}),(0,f.jsx)(c.z,{type:"button",className:"p-button-danger p-button-sm p-button-text",onClick:function(){return T(e)},icon:"pi pi-times"})]}),!e.isImage&&(0,f.jsxs)("div",{className:"flex card p-1 gap-2 justify-content-between align-items-center p-1",children:[(0,f.jsx)("a",{target:"_blank",rel:"noreferrer",href:t.getFileFullPath(e.path),children:(0,f.jsx)(o.q,{size:"large",icon:"pi pi-file"})}),(0,f.jsx)("span",{className:"text-sm text-500",children:e.shortName}),(0,f.jsx)(c.z,{type:"button",className:"p-button-danger p-button-sm p-button-text",onClick:function(){return T(e)},icon:"pi pi-times"})]})]},e.path)}))}):null}(0,r.useEffect)((function(){z(),b.length>=_?P(!0):P(!1)}),[b,b.length,_]);return(0,f.jsxs)("div",{className:"p-2 surface-200",children:[(0,f.jsx)(l.p,{disabled:S,name:"file",ref:x,auto:!0,maxFileSize:Z,accept:F,multiple:M,mode:"advanced",url:t.setApiPath(e.uploadPath),onBeforeSend:function(e){var t=h.getToken();e.xhr.setRequestHeader("Authorization","Bearer ".concat(t))},onUpload:function(t){var a=t.xhr.response;b.push(a),v(b),R(),e.onUploadCompleted(a)},onError:function(t){var a,n=(null===t||void 0===t||null===(a=t.xhr)||void 0===a?void 0:a.response)||"Unable to upload file";e.onUploadError(n)},emptyTemplate:function(){return(0,f.jsxs)("div",{className:"flex justify-content-center align-items-center gap-3 text-500",children:[(0,f.jsx)("i",{className:"pi pi-upload text-5xl"}),(0,f.jsx)("span",{className:"font-bold",children:e.label})]})}}),(0,f.jsx)(E,{})]})};h.defaultProps={onChange:function(){},onUploadCompleted:function(){},onUploadError:function(){}}},391:function(e,t,a){a.r(t);var n=a(5888),i=a(919),s=a(1063),r=a(9542),l=a(3301),o=a(5852),c=a(9025),p=a(3504),d=a(1091),u=a(8784),m=(a(2557),a(1439)),f=a(3898),h=a(4018),x=a(1455),g=a(7824),j=a(184),b=function(e){var t=(0,h.Z)(),a=(0,g.Z)({search:{tagTitle:"Search",value:"",valueType:"single",options:[]}}),b=(0,x.Z)(e,a),v=b.records,N=b.pageReady,w=b.loading,y=b.selectedItems,C=b.sortBy,k=b.sortOrder,D=b.apiRequestError,S=b.setSelectedItems,P=b.getPageBreadCrumbs,I=b.onSort,_=b.deleteItem,M=b.pagination,F=a.filters,Z=a.setFilterValue,z=M.totalRecords,R=M.totalPages,T=M.recordsPosition,U=M.firstRow,E=M.limit,B=M.onPageChange;function L(){if(N&&!v.length)return(0,j.jsx)("div",{className:"text-lg mt-3 p-3 text-center text-400 font-bold",children:"Tidak Ada Di Temukan !"})}function H(){if(y.length)return(0,j.jsx)("div",{className:"m-2 flex-grow-0",children:(0,j.jsx)(i.z,{onClick:function(){return _(y)},icon:"pi pi-trash",className:"p-button-danger",title:"Delete Selected"})})}function O(){if(e.importData)return(0,j.jsx)("div",{className:"m-2",children:(0,j.jsx)(o.M,{label:"Select a file to import",uploadPath:"tbl_jam/importdata",buttonIcon:"pi pi-folder",buttonLabel:"Import Data",onImportCompleted:function(e){t.flashMsg("Import Data",e,"success")}})})}function J(){if(e.paginate&&R>1){var t={layout:M.layout,CurrentPageReport:function(e){return(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)("span",{className:"text-sm text-gray-500 px-2",children:["Records ",(0,j.jsxs)("b",{children:[T," of ",e.totalRecords]})]})})}};return(0,j.jsx)("div",{className:"flex-grow-1",children:(0,j.jsx)(u.D,{first:U,rows:E,totalRecords:z,onPageChange:B,template:t})})}}function A(){if(N&&e.showFooter)return(0,j.jsxs)("div",{className:"flex flex-wrap justify-content-between",children:[(0,j.jsx)(H,{}),(0,j.jsx)(O,{}),(0,j.jsx)(J,{})]})}function V(){if(e.showBreadcrumbs){var t=P();return t.length>0&&(0,j.jsx)(n.c,{className:"mb-3",model:t})}}return D?(0,j.jsx)(d.M,{error:D}):(0,j.jsxs)("main",{id:"TblJamListPage",className:"main-page",children:[e.showHeader&&(0,j.jsx)("section",{className:"page-section mb-3",children:(0,j.jsx)("div",{className:"container-fluid",children:(0,j.jsxs)("div",{className:"grid justify-content-between align-items-center",children:[(0,j.jsx)("div",{className:"col ",children:(0,j.jsx)(f.D,{title:"Data Jam Mengajar",titleClass:"text-2xl text-primary font-bold",subTitleClass:"text-sm text-500",separator:!1})}),(0,j.jsx)("div",{className:"col-12 md:col-3 ",children:(0,j.jsx)(p.rU,{to:"/tbl_jam/add",children:(0,j.jsx)(i.z,{label:"Tambah Jam Mengajar",icon:"pi pi-plus",type:"button",className:"p-button bg-primary "})})}),(0,j.jsx)("div",{className:"col-12 md:col-5 lg:col-4 ",children:(0,j.jsxs)("span",{className:"p-input-icon-left w-full",children:[(0,j.jsx)("i",{className:"pi pi-search"}),(0,j.jsx)(c.o,{placeholder:"Cari Jam Mapel",className:"w-full",value:F.search.value,onChange:function(e){return Z("search",e.target.value)}})]})})]})})}),(0,j.jsx)("section",{className:"page-section ",children:(0,j.jsx)("div",{className:"container-fluid",children:(0,j.jsx)("div",{className:"grid ",children:(0,j.jsxs)("div",{className:"col comp-grid",children:[(0,j.jsx)(l.W,{filterController:a}),(0,j.jsxs)("div",{children:[(0,j.jsx)(V,{}),(0,j.jsxs)("div",{className:"".concat(e.isSubPage?"":"card "),children:[(0,j.jsx)("div",{className:"page-records",children:(0,j.jsxs)(r.w,{lazy:!0,loading:w,selectionMode:"checkbox",selection:y,onSelectionChange:function(e){return S(e.value)},value:v,dataKey:"id_jam",sortField:C,sortOrder:k,onSort:I,className:" p-datatable-sm",stripedRows:!0,showGridlines:!1,rowHover:!0,responsiveLayout:"stack",emptyMessage:(0,j.jsx)(L,{}),children:[(0,j.jsx)(s.s,{selectionMode:"multiple",headerStyle:{width:"2rem"}}),(0,j.jsx)(s.s,{field:"nama_jam",header:"Jam Mengajar"}),(0,j.jsx)(s.s,{headerStyle:{width:"2rem"},headerClass:"text-center",body:function(e){var a=[{label:"View",command:function(a){t.navigate("/tbl_jam/view/".concat(e.id_jam))},icon:"pi pi-eye"},{label:"Edit",command:function(a){t.navigate("/tbl_jam/edit/".concat(e.id_jam))},icon:"pi pi-pencil"},{label:"Delete",command:function(t){_(e.id_jam)},icon:"pi pi-trash"}];return(0,j.jsx)(m.a,{dropdownIcon:"pi pi-bars",className:"dropdown-only p-button-text p-button-plain",model:a})}})]})}),(0,j.jsx)(A,{})]})]})]})})})})]})};b.defaultProps={primaryKey:"id_jam",pageName:"tbl_jam",apiPath:"tbl_jam/index",routeName:"tbl_jamlist",msgBeforeDelete:"Yakin Menghapus Data Ini?",msgTitle:"Delete Record",msgAfterDelete:"Data Berhasil Di Hapus !",showHeader:!0,showFooter:!0,paginate:!0,isSubPage:!1,showBreadcrumbs:!0,exportData:!1,importData:!0,keepRecords:!1,multiCheckbox:!0,search:"",fieldName:null,fieldValue:null,sortField:"",sortDir:"",pageNo:1,limit:20},t.default=b}}]);
//# sourceMappingURL=391.4d2986a3.chunk.js.map