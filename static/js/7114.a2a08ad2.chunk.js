"use strict";(self.webpackChunkpiket=self.webpackChunkpiket||[]).push([[7114,1323,7691],{9822:function(e,a,r){r.d(a,{v:function(){return o}});var n=r(4165),t=r(5861),s=r(885),i=r(2791),l=r(4072),o=function(e){var a=(0,i.useState)(!1),r=(0,s.Z)(a,2),o=r[0],c=r[1],u=(0,i.useState)(!1),d=(0,s.Z)(u,2),m=d[0],p=d[1],f=(0,l.Z)(),h=e.apiPath,x=e.value;function v(){return(v=(0,t.Z)((0,n.Z)().mark((function e(){var a,r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=encodeURIComponent(x.trim()))){e.next=9;break}return p(!0),e.next=6,f.get("".concat(h,"/").concat(a));case 6:"true"===(null===(r=e.sent)||void 0===r?void 0:r.data.toString())?c(!0):c(!1),p(!1);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return e.children({loading:m,check:function(){return v.apply(this,arguments)},exist:o})}},1091:function(e,a,r){r.d(a,{M:function(){return l}});var n=r(8284),t=r(1323),s=r(7691),i=r(184),l=function(e){var a=e.error.response,r=a.status,l=void 0===r?500:r,o=a.data,c=void 0===o?"Unable to process request.":o;return 404===l?(0,i.jsx)(n.default,{message:c}):403===l?(0,i.jsx)(t.default,{message:c}):(0,i.jsx)(s.default,{message:c})}},5815:function(e,a,r){r.d(a,{Q:function(){return h}});var n=r(4165),t=r(5861),s=r(885),i=r(2791),l=r(1128),o=r(7162),c=r(919),u=r(894),d=r(3306),m=r(4072),p=r(6884),f=r(184),h=function(e){var a=(0,u.Z)(),r=(0,m.Z)(),h=(0,d.Z)(),x=(0,i.useRef)(null),v=(0,i.useState)([]),g=(0,s.Z)(v,2),j=g[0],N=g[1],b=(0,i.useState)([]),y=(0,s.Z)(b,2),_=y[0],S=y[1],k=(0,i.useState)(!1),Z=(0,s.Z)(k,2),C=Z[0],w=Z[1];(0,i.useEffect)((function(){if(e.value){var a=e.value.toString().split(",");N(a)}}),[e.value]);var U=e.maxFileSize||10,P=e.fileLimit||10,E=e.multiple,F=e.accept,R=1024*U*1024;function z(){var e=[];j.forEach((function(r){var n=r.split("\\").pop().split("/").pop(),t=n.split(".").pop().toLowerCase(),s=!1;["jpg","png","gif","jpeg","bmp"].indexOf(t)>-1&&(s=!0);var i="small";r.indexOf("temp/")>-1&&(i="");var l=a.strEllipsis(n,15);e.push({name:n,shortName:l,isImage:s,size:i,path:r})})),S(e)}function D(){e.onChange(j.toString())}function A(e){return q.apply(this,arguments)}function q(){return(q=(0,t.Z)((0,n.Z)().mark((function e(a){var t,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,-1===(t=j.indexOf(a.path))){e.next=11;break}return j.splice(t,1),N(j),z(),D(),"fileuploader/remove_temp_file",s={temp_file:a.path},e.next=11,r.post("fileuploader/remove_temp_file",s);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function B(){return e.showUploadedFiles&&_.length?(0,f.jsx)("div",{className:"flex gap-2 flex-wrap py-2",children:_.map((function(e){return(0,f.jsxs)("div",{children:[e.isImage&&(0,f.jsxs)("div",{className:"card flex justify-content-between gap-2 align-items-center p-1",children:[(0,f.jsx)(p.O,{width:"40px",height:"40px",imageSize:"small",src:e.path}),(0,f.jsx)(c.z,{type:"button",className:"p-button-danger p-button-sm p-button-text",onClick:function(){return A(e)},icon:"pi pi-times"})]}),!e.isImage&&(0,f.jsxs)("div",{className:"flex card p-1 gap-2 justify-content-between align-items-center p-1",children:[(0,f.jsx)("a",{target:"_blank",rel:"noreferrer",href:a.getFileFullPath(e.path),children:(0,f.jsx)(o.q,{size:"large",icon:"pi pi-file"})}),(0,f.jsx)("span",{className:"text-sm text-500",children:e.shortName}),(0,f.jsx)(c.z,{type:"button",className:"p-button-danger p-button-sm p-button-text",onClick:function(){return A(e)},icon:"pi pi-times"})]})]},e.path)}))}):null}(0,i.useEffect)((function(){z(),j.length>=P?w(!0):w(!1)}),[j,j.length,P]);return(0,f.jsxs)("div",{className:"p-2 surface-200",children:[(0,f.jsx)(l.p,{disabled:C,name:"file",ref:x,auto:!0,maxFileSize:R,accept:F,multiple:E,mode:"advanced",url:a.setApiPath(e.uploadPath),onBeforeSend:function(e){var a=h.getToken();e.xhr.setRequestHeader("Authorization","Bearer ".concat(a))},onUpload:function(a){var r=a.xhr.response;j.push(r),N(j),D(),e.onUploadCompleted(r)},onError:function(a){var r,n=(null===a||void 0===a||null===(r=a.xhr)||void 0===r?void 0:r.response)||"Unable to upload file";e.onUploadError(n)},emptyTemplate:function(){return(0,f.jsxs)("div",{className:"flex justify-content-center align-items-center gap-3 text-500",children:[(0,f.jsx)("i",{className:"pi pi-upload text-5xl"}),(0,f.jsx)("span",{className:"font-bold",children:e.label})]})}}),(0,f.jsx)(B,{})]})};h.defaultProps={onChange:function(){},onUploadCompleted:function(){},onUploadError:function(){}}},8355:function(e,a,r){var n=r(4165),t=r(5861),s=r(1413),i=r(885),l=r(2791),o=r(6871),c=r(4018),u=r(1933),d=r(4072),m=r(4621);a.Z=function(e){var a=e.props,r=e.formDefaultValues,p=e.afterSubmit,f=(0,c.Z)(),h=(0,d.Z)(),x=(0,o.UO)().pageid,v=(0,l.useState)(null),g=(0,i.Z)(v,2),j=g[0],N=g[1],b=(0,l.useState)(r),y=(0,i.Z)(b,2),_=y[0],S=y[1],k=(0,l.useState)(!1),Z=(0,i.Z)(k,2),C=Z[0],w=Z[1],U=a.id||x;U=U||"";var P="".concat(a.apiPath,"/").concat(U),E=(0,u.useQuery)([a.pageName,P],(function(){return h.get(P).then((function(e){return null===e||void 0===e?void 0:e.data}))}),{retry:!1}),F=E.isLoading,R=E.isError,z=E.data,D=E.error;(0,l.useEffect)((function(){if(z){var e=function(e){var a=(0,s.Z)({},e);return Object.keys(a).forEach((function(e){var n=a[e],t=r[e];Array.isArray(t)?a[e]=n?n.toString().split(","):t:t instanceof Date&&n&&(a[e]=new Date(n))})),a}(z);S(e),N(z),w(!0)}}),[z,R]);var A=(0,u.useQueryClient)(),q=(0,u.useMutation)((function(e){var a=function(e){var a=(0,s.Z)({},e);return Object.keys(a).forEach((function(e){var r=a[e];if(Array.isArray(r)){var n=r[0];a[e]=n&&"string"==typeof n?r.toString():r}else r instanceof Date?a[e]=r.toISOString().slice(0,19).replace("T"," "):""===r&&(a[e]=null)})),a}(e);return h.post(P,a).then((function(e){return null===e||void 0===e?void 0:e.data}))}),{retry:!1,onSuccess:function(e){A.invalidateQueries(a.pageName),p&&p(e)},onError:function(e){f.showPageRequestError(e)}});var B={currentRecord:j,formData:_,inputClassName:function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"w-full";return e?"".concat(a," p-invalid"):a},setFormData:S,handleSubmit:function(e,r){r.isValid||f.flashMsg(a.formValidationError,a.formValidationMsg,"error")},submitForm:function(e){var r=a.msgBeforeSave;r?(0,m.V)({header:a.msgTitle,message:r,icon:"pi pi-save",accept:function(){var a=(0,t.Z)((0,n.Z)().mark((function a(){return(0,n.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:q.mutate(e);case 1:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),reject:function(){}}):q.mutate(e)},setCurrentRecord:N,pageReady:C,saving:q.isLoading,loading:F,apiRequestError:D};return(0,l.useMemo)((function(){return B}),[_,j,C,q.isLoading,F,D])}},1323:function(e,a,r){r.r(a);r(2791);var n=r(919),t=r(7162),s=r(4018),i=r(184),l=function(e){var a=(0,s.Z)();return(0,i.jsx)("div",{className:"container",children:(0,i.jsxs)("div",{className:"grid flex-column align-items-center card",children:[(0,i.jsx)("div",{className:"text-pink-500 font-bold text-5xl",children:"403"}),(0,i.jsx)(t.q,{size:"xlarge",icon:"pi pi-lock",className:"text-pink-500 bg-pink-100  my-4"}),(0,i.jsx)("div",{className:"text-900 font-medium text-3xl mb-2",children:e.message}),(0,i.jsx)("div",{className:"text-gray-600",children:"You do not have the necesary permisions. Please contact admins."}),(0,i.jsx)("div",{className:"mt-5 text-center",children:(0,i.jsx)(n.z,{onClick:function(){return a.navigate("/home")},icon:"pi pi-arrow-left",label:"Home"})})]})})};l.defaultProps={message:"Access Denied"},a.default=l},7691:function(e,a,r){r.r(a);r(2791);var n=r(919),t=r(7162),s=r(4018),i=r(184),l=function(e){var a=(0,s.Z)();return(0,i.jsx)("div",{className:"container",children:(0,i.jsxs)("div",{className:"grid flex-column align-items-center card",children:[(0,i.jsx)("div",{className:"text-pink-500 font-bold text-5xl",children:"500"}),(0,i.jsx)(t.q,{size:"xlarge",icon:"pi pi-lock",className:"text-pink-500 bg-pink-100  my-4"}),(0,i.jsx)("div",{className:"text-900 font-medium text-3xl mb-2",children:e.message}),(0,i.jsx)("div",{className:"text-gray-600",children:"An error occurred while processing your request. Please contact the Administrator for more information"}),(0,i.jsx)("div",{className:"mt-5 text-center",children:(0,i.jsx)(n.z,{onClick:function(){return a.navigate("/home")},icon:"pi pi-arrow-left",label:"Home"})})]})})};l.defaultProps={message:"Access Denied"},a.default=l},7114:function(e,a,r){r.r(a);var n=r(5705),t=r(9562),s=r(919),i=r(9822),l=r(8550),o=r(3014),c=r(9025),u=r(1091),d=r(2557),m=r(3898),p=r(5815),f=r(4018),h=r(8355),x=r(184),v=function(e){var a=(0,f.Z)(),r=t.Ry().shape({username:t.Z_().required().label("Username"),telp:t.Z_().nullable().label("Telp"),foto_user:t.Z_().required().label("Foto User"),user_role_id:t.Rx().nullable().label("User Role Id")}),v=(0,h.Z)({props:e,formDefaultValues:{username:"",telp:"NULL",foto_user:"",user_role_id:""},afterSubmit:function(r){a.flashMsg(e.msgTitle,e.msgAfterSave),a.isDialogOpen()?a.closeDialogs():e.redirect&&a.navigate("/user")}}),g=v.formData,j=v.handleSubmit,N=v.submitForm,b=v.pageReady,y=v.loading,_=v.saving,S=v.apiRequestError,k=v.inputClassName;return y?(0,x.jsx)("div",{className:"p-3 text-center",children:(0,x.jsx)(d.G,{style:{width:"50px",height:"50px"}})}):S?(0,x.jsx)(u.M,{error:S}):b?(0,x.jsxs)("main",{id:"UserEditPage",className:"main-page",children:[e.showHeader&&(0,x.jsx)("section",{className:"page-section mb-3",children:(0,x.jsx)("div",{className:"container",children:(0,x.jsxs)("div",{className:"grid align-items-center",children:[!e.isSubPage&&(0,x.jsx)("div",{className:"col-fixed ",children:(0,x.jsx)(s.z,{onClick:function(){return a.navigate(-1)},label:"",className:"p-button p-button-text ",icon:"pi pi-arrow-left"})}),(0,x.jsx)("div",{className:"col ",children:(0,x.jsx)(m.D,{title:"Edit User",titleClass:"text-2xl text-primary font-bold",subTitleClass:"text-sm text-500",separator:!1})})]})})}),(0,x.jsx)("section",{className:"page-section ",children:(0,x.jsx)("div",{className:"container",children:(0,x.jsx)("div",{className:"grid ",children:(0,x.jsx)("div",{className:"md:col-9 sm:col-12 comp-grid",children:(0,x.jsx)("div",{children:(0,x.jsx)(n.J9,{initialValues:g,validationSchema:r,onSubmit:function(e,a){N(e)},children:function(r){var t,u;return(0,x.jsxs)(n.l0,{className:"".concat(e.isSubPage?"":"card "),children:[(0,x.jsxs)("div",{className:"grid",children:[(0,x.jsx)("div",{className:"col-12",children:(0,x.jsxs)("div",{className:"formgrid grid",children:[(0,x.jsx)("div",{className:"col-12 md:col-3",children:"Username *"}),(0,x.jsx)("div",{className:"col-12 md:col-9",children:(0,x.jsx)(i.v,{value:r.values.username,apiPath:"components_data/user_username_exist",children:function(e){var a;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(c.o,{name:"username",onBlur:e.check,onChange:r.handleChange,value:r.values.username,label:"Username",type:"text",placeholder:"Enter Username",className:k(null===r||void 0===r||null===(a=r.errors)||void 0===a?void 0:a.username)}),(0,x.jsx)(n.Bc,{name:"username",component:"span",className:"p-error"}),!e.loading&&e.exist&&(0,x.jsx)("small",{className:"p-error",children:"Not available"}),e.loading&&(0,x.jsx)("small",{className:"text-500",children:"Checking..."})]})}})})]})}),(0,x.jsx)("div",{className:"col-12",children:(0,x.jsxs)("div",{className:"formgrid grid",children:[(0,x.jsx)("div",{className:"col-12 md:col-3",children:"Telp"}),(0,x.jsxs)("div",{className:"col-12 md:col-9",children:[(0,x.jsx)(c.o,{name:"telp",onChange:r.handleChange,value:r.values.telp,label:"Telp",type:"text",placeholder:"Enter Telp",className:k(null===r||void 0===r||null===(t=r.errors)||void 0===t?void 0:t.telp)}),(0,x.jsx)(n.Bc,{name:"telp",component:"span",className:"p-error"})]})]})}),(0,x.jsx)("div",{className:"col-12",children:(0,x.jsxs)("div",{className:"formgrid grid",children:[(0,x.jsx)("div",{className:"col-12 md:col-3",children:"Foto User *"}),(0,x.jsxs)("div",{className:"col-12 md:col-9",children:[(0,x.jsx)("div",{className:k(null===r||void 0===r||null===(u=r.errors)||void 0===u?void 0:u.foto_user),children:(0,x.jsx)(p.Q,{name:"foto_user",showUploadedFiles:!0,value:r.values.foto_user,uploadPath:"fileuploader/upload/foto_user",onChange:function(e){return r.setFieldValue("foto_user",e)},fileLimit:1,maxFileSize:1024,accept:".jpg,.png,.gif,.jpeg",multiple:!1,label:"Choose files or drop files here",onUploadError:function(e){return a.flashMsg("Upload error",e,"error")}})}),(0,x.jsx)(n.Bc,{name:"foto_user",component:"span",className:"p-error"})]})]})}),(0,x.jsx)("div",{className:"col-12",children:(0,x.jsxs)("div",{className:"formgrid grid",children:[(0,x.jsx)("div",{className:"col-12 md:col-3",children:"User Role Id"}),(0,x.jsx)("div",{className:"col-12 md:col-9",children:(0,x.jsx)(l.o,{apiPath:"components_data/role_id_option_list",children:function(e){var a,t=e.response;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(o.L,{name:"user_role_id",optionLabel:"label",optionValue:"value",value:r.values.user_role_id,onChange:r.handleChange,options:t,label:"User Role Id",placeholder:"Select a value ...",className:k(null===r||void 0===r||null===(a=r.errors)||void 0===a?void 0:a.user_role_id)}),(0,x.jsx)(n.Bc,{name:"user_role_id",component:"span",className:"p-error"})]})}})})]})})]}),e.showFooter&&(0,x.jsx)("div",{className:"text-center my-3",children:(0,x.jsx)(s.z,{onClick:function(e){return j(e,r)},type:"submit",label:"Perbaharui",icon:"pi pi-send",loading:_})})]})}})})})})})})]}):void 0};v.defaultProps={primaryKey:"id_user",pageName:"user",apiPath:"user/edit",routeName:"useredit",submitButtonLabel:"Perbaharui",formValidationError:"Form is invalid",formValidationMsg:"Please complete the form",msgTitle:"Update Record",msgAfterSave:"Data Berhasil Di Perbaharui !",msgBeforeSave:"",showHeader:!0,showFooter:!0,redirect:!0,isSubPage:!1},a.default=v}}]);
//# sourceMappingURL=7114.a2a08ad2.chunk.js.map