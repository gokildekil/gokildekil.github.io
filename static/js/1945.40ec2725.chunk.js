"use strict";(self.webpackChunkpiket=self.webpackChunkpiket||[]).push([[1945],{7842:function(e,a,n){var l=n(4165),s=n(5861),r=n(1413),i=n(885),t=n(2791),o=n(4018),c=n(1933),d=n(4072),u=n(4621);a.Z=function(e){var a=e.props,n=e.formDefaultValues,m=e.afterSubmit,p=(0,o.Z)(),h=(0,d.Z)(),g=(0,t.useState)(!0),v=(0,i.Z)(g,1)[0],f=p.getPageFormData(a.pageName),j=a.formData,x=(0,r.Z)((0,r.Z)((0,r.Z)({},n),j),f),N=(0,t.useState)(x),b=(0,i.Z)(N,2),y=b[0],k=b[1],_=(0,c.useQueryClient)(),C=(0,c.useMutation)((function(e){var n,l=a.apiPath;n=Array.isArray(e)?e.map((function(e){return P(e)})):P(e);return h.post(l,n).then((function(e){return null===e||void 0===e?void 0:e.data}))}),{retry:!1,onSuccess:function(e){_.invalidateQueries(a.pageName),m&&m(e)},onError:function(e){p.showPageRequestError(e)}});function P(e){var a=(0,r.Z)({},e);return Object.keys(a).forEach((function(e){var n=a[e];if(Array.isArray(n)){var l=n[0];a[e]=l&&"string"==typeof l?n.toString():n}else n instanceof Date?a[e]=n.toISOString().slice(0,19).replace("T"," "):""===n&&(a[e]=null)})),a}var F={setFormData:k,submitForm:function(e){var n=a.msgBeforeSave;n?(0,u.V)({header:a.msgTitle,message:n,icon:"pi pi-save",accept:function(){var a=(0,s.Z)((0,l.Z)().mark((function a(){return(0,l.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:C.mutate(e);case 1:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),reject:function(){}}):C.mutate(e)},inputClassName:function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"w-full";return e?"".concat(a," p-invalid"):a},resetForm:function(){k(x)},handleSubmit:function(e,n){n.isValid||p.flashMsg(a.formValidationError,a.formValidationMsg,"error")},formData:y,pageReady:v,saving:C.isLoading};return(0,t.useMemo)((function(){return F}),[y,v,C.isLoading])}},869:function(e,a,n){n.r(a);var l=n(5705),s=n(9562),r=n(919),i=n(7201),t=n(3540),o=n(8550),c=n(3014),d=n(8218),u=n(2557),m=n(3898),p=n(4018),h=n(7842),g=n(184),v=function(e){var a=(0,p.Z)(),n=s.Ry().shape({tanggal:s.Z_().nullable().label("Tanggal"),nama:s.Z_().required().label("Nama Guru"),bidang_study:s.Z_().required().label("Mata Pelajaran"),kelas:s.Z_().required().label("Kelas"),jurusan:s.Z_().required().label("Jurusan"),jam_ke:s.Z_().required().label("Jam Mengajar Ke"),kehadiran:s.IX().min(1).label("Kehadiran"),keterangan:s.Z_().nullable().label("Keterangan")}),v=(0,h.Z)({props:e,formDefaultValues:{tanggal:"NULL",nama:"",bidang_study:"",kelas:"",jurusan:"",jam_ke:"",kehadiran:[],keterangan:""},afterSubmit:function(n){a.flashMsg(e.msgTitle,e.msgAfterSave),j(),a.isDialogOpen()?a.closeDialogs():e.redirect&&a.navigate("/kbm_guru")}}),f=v.formData,j=v.resetForm,x=v.handleSubmit,N=v.submitForm,b=v.pageReady,y=v.loading,k=v.saving,_=v.inputClassName;return y?(0,g.jsx)("div",{className:"p-3 text-center",children:(0,g.jsx)(u.G,{style:{width:"50px",height:"50px"}})}):b?(0,g.jsxs)("main",{id:"KbmGuruAddPage",className:"main-page",children:[e.showHeader&&(0,g.jsx)("section",{className:"page-section mb-3",children:(0,g.jsx)("div",{className:"container",children:(0,g.jsxs)("div",{className:"grid align-items-center",children:[!e.isSubPage&&(0,g.jsx)("div",{className:"col-fixed ",children:(0,g.jsx)(r.z,{onClick:function(){return a.navigate(-1)},label:"",className:"p-button p-button-text ",icon:"pi pi-arrow-left"})}),(0,g.jsx)("div",{className:"col ",children:(0,g.jsx)(m.D,{title:"Form Input kbm Guru",titleClass:"text-2xl text-primary font-bold",subTitleClass:"text-sm text-500",separator:!1})})]})})}),(0,g.jsx)("section",{className:"page-section ",children:(0,g.jsx)("div",{className:"container",children:(0,g.jsx)("div",{className:"grid ",children:(0,g.jsx)("div",{className:"md:col-9 sm:col-12 comp-grid",children:(0,g.jsx)("div",{children:(0,g.jsx)(l.J9,{initialValues:f,validationSchema:n,onSubmit:function(e,a){return N(e)},children:function(n){var s,u,m;return(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)(l.l0,{className:"".concat(e.isSubPage?"":"card "),children:[(0,g.jsxs)("div",{className:"grid",children:[(0,g.jsx)("div",{className:"col-12",children:(0,g.jsxs)("div",{className:"formgrid grid",children:[(0,g.jsx)("div",{className:"col-12 md:col-3",children:"Tanggal"}),(0,g.jsxs)("div",{className:"col-12 md:col-9",children:[(0,g.jsx)(i.f,{name:"tanggal",showButtonBar:!0,className:_(null===n||void 0===n||null===(s=n.errors)||void 0===s?void 0:s.tanggal),dateFormat:"yy-mm-dd",value:n.values.tanggal,onChange:n.handleChange,showIcon:!0}),(0,g.jsx)(l.Bc,{name:"tanggal",component:"span",className:"p-error"})]})]})}),(0,g.jsx)("div",{className:"col-12",children:(0,g.jsxs)("div",{className:"formgrid grid",children:[(0,g.jsx)("div",{className:"col-12 md:col-3",children:"Nama Guru *"}),(0,g.jsx)("div",{className:"col-12 md:col-9",children:(0,g.jsx)(o.o,{apiPath:"components_data/nama_option_list",children:function(e){var a,s=e.response;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(c.L,{name:"nama",optionLabel:"label",optionValue:"value",value:n.values.nama,onChange:n.handleChange,options:s,label:"Nama Guru",placeholder:"Pilih Guru",className:_(null===n||void 0===n||null===(a=n.errors)||void 0===a?void 0:a.nama)}),(0,g.jsx)(l.Bc,{name:"nama",component:"span",className:"p-error"})]})}})})]})}),(0,g.jsx)("div",{className:"col-12",children:(0,g.jsxs)("div",{className:"formgrid grid",children:[(0,g.jsx)("div",{className:"col-12 md:col-3",children:"Mata Pelajaran *"}),(0,g.jsx)("div",{className:"col-12 md:col-9",children:(0,g.jsx)(o.o,{apiPath:"components_data/bidang_study_option_list",children:function(e){var a,s=e.response;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(c.L,{name:"bidang_study",optionLabel:"label",optionValue:"value",value:n.values.bidang_study,onChange:n.handleChange,options:s,label:"Mata Pelajaran",placeholder:"Pilih Mata Pelajaran",className:_(null===n||void 0===n||null===(a=n.errors)||void 0===a?void 0:a.bidang_study)}),(0,g.jsx)(l.Bc,{name:"bidang_study",component:"span",className:"p-error"})]})}})})]})}),(0,g.jsx)("div",{className:"col-12",children:(0,g.jsxs)("div",{className:"formgrid grid",children:[(0,g.jsx)("div",{className:"col-12 md:col-3",children:"Kelas *"}),(0,g.jsx)("div",{className:"col-12 md:col-9",children:(0,g.jsx)(o.o,{apiPath:"components_data/kelas_option_list",children:function(e){var a,s=e.response;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(c.L,{name:"kelas",optionLabel:"label",optionValue:"value",value:n.values.kelas,onChange:n.handleChange,options:s,label:"Kelas",placeholder:"Pilih Kelas",className:_(null===n||void 0===n||null===(a=n.errors)||void 0===a?void 0:a.kelas)}),(0,g.jsx)(l.Bc,{name:"kelas",component:"span",className:"p-error"})]})}})})]})}),(0,g.jsx)("div",{className:"col-12",children:(0,g.jsxs)("div",{className:"formgrid grid",children:[(0,g.jsx)("div",{className:"col-12 md:col-3",children:"Jurusan *"}),(0,g.jsxs)("div",{className:"col-12 md:col-9",children:[(0,g.jsx)(c.L,{name:"jurusan",optionLabel:"label",optionValue:"value",value:n.values.jurusan,onChange:n.handleChange,options:a.menus.jurusanItems,label:"Jurusan",placeholder:"Pilih Jurusan",className:_(null===n||void 0===n||null===(u=n.errors)||void 0===u?void 0:u.jurusan)}),(0,g.jsx)(l.Bc,{name:"jurusan",component:"span",className:"p-error"})]})]})}),(0,g.jsx)("div",{className:"col-12",children:(0,g.jsxs)("div",{className:"formgrid grid",children:[(0,g.jsx)("div",{className:"col-12 md:col-3",children:"Jam Mengajar Ke *"}),(0,g.jsx)("div",{className:"col-12 md:col-9",children:(0,g.jsx)(o.o,{apiPath:"components_data/jam_ke_option_list",children:function(e){var a,s=e.response;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(c.L,{name:"jam_ke",optionLabel:"label",optionValue:"value",value:n.values.jam_ke,onChange:n.handleChange,options:s,label:"Jam Mengajar Ke",placeholder:"Pilh Jam Mengajar",className:_(null===n||void 0===n||null===(a=n.errors)||void 0===a?void 0:a.jam_ke)}),(0,g.jsx)(l.Bc,{name:"jam_ke",component:"span",className:"p-error"})]})}})})]})}),(0,g.jsx)("div",{className:"col-12",children:(0,g.jsxs)("div",{className:"formgrid grid",children:[(0,g.jsx)("div",{className:"col-12 md:col-3",children:"Kehadiran *"}),(0,g.jsxs)("div",{className:"col-12 md:col-9",children:[a.menus.kehadiranItems.map((function(e){var a;return(0,g.jsxs)("div",{className:"field-checkbox",children:[(0,g.jsx)(t.X,{inputId:e.value,name:"kehadiran",value:e.value,onChange:n.handleChange,checked:n.values.kehadiran.includes(e.value),className:_(null===n||void 0===n||null===(a=n.errors)||void 0===a?void 0:a.kehadiran,"")}),(0,g.jsx)("label",{htmlFor:e.value,children:e.label})]},e.value)})),(0,g.jsx)(l.Bc,{name:"kehadiran",component:"span",className:"p-error"})]})]})}),(0,g.jsx)("div",{className:"col-12",children:(0,g.jsxs)("div",{className:"formgrid grid",children:[(0,g.jsx)("div",{className:"col-12 md:col-3",children:"Keterangan"}),(0,g.jsxs)("div",{className:"col-12 md:col-9",children:[(0,g.jsx)(d.g,{name:"keterangan",className:_(null===n||void 0===n||null===(m=n.errors)||void 0===m?void 0:m.keterangan),value:n.values.keterangan,placeholder:"Keterangan",onChange:n.handleChange}),(0,g.jsx)(l.Bc,{name:"keterangan",component:"span",className:"p-error"})]})]})})]}),e.showFooter&&(0,g.jsx)("div",{className:"text-center my-3",children:(0,g.jsx)(r.z,{onClick:function(e){return x(e,n)},className:"p-button-primary",type:"submit",label:"Simpan",icon:"pi pi-send",loading:k})})]})})}})})})})})})]}):void 0};v.defaultProps={primaryKey:"id_kehadiran_ajar",pageName:"kbm_guru",apiPath:"kbm_guru/add",routeName:"kbm_guruadd",submitButtonLabel:"Simpan",formValidationError:"Form is invalid",formValidationMsg:"Please complete the form",msgTitle:"Create Record",msgAfterSave:"Data Berhasil Di Simpan !",msgBeforeSave:"",showHeader:!0,showFooter:!0,redirect:!0,isSubPage:!1},a.default=v},8218:function(e,a,n){n.d(a,{g:function(){return t}});var l=n(2791),s=n(3574),r=n(5854);function i(){return i=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},i.apply(this,arguments)}var t=l.memo(l.forwardRef((function(e,a){var n=l.useRef(a),o=l.useRef(0),c=function(e){var a=n.current;a&&r.p7.isVisible(a)&&(o.current||(o.current=a.scrollHeight,a.style.overflow="hidden"),(o.current!==a.scrollHeight||e)&&(a.style.height="",a.style.height=a.scrollHeight+"px",parseFloat(a.style.height)>=parseFloat(a.style.maxHeight)?(a.style.overflowY="scroll",a.style.height=a.style.maxHeight):a.style.overflow="hidden",o.current=a.scrollHeight))},d=l.useMemo((function(){return r.gb.isNotEmpty(e.value)||r.gb.isNotEmpty(e.defaultValue)||n.current&&r.gb.isNotEmpty(n.current.value)}),[e.value,e.defaultValue]);l.useEffect((function(){r.gb.combinedRefs(n,a)}),[n,a]),l.useEffect((function(){e.autoResize&&c(!0)}),[e.autoResize]);var u=r.gb.isNotEmpty(e.tooltip),m=r.gb.findDiffKeys(e,t.defaultProps),p=(0,r.AK)("p-inputtextarea p-inputtext p-component",{"p-disabled":e.disabled,"p-filled":d,"p-inputtextarea-resizable":e.autoResize},e.className);return l.createElement(l.Fragment,null,l.createElement("textarea",i({ref:n},m,{className:p,onFocus:function(a){e.autoResize&&c(),e.onFocus&&e.onFocus(a)},onBlur:function(a){e.autoResize&&c(),e.onBlur&&e.onBlur(a)},onKeyUp:function(a){e.autoResize&&c(),e.onKeyUp&&e.onKeyUp(a)},onInput:function(a){e.autoResize&&c(),e.onInput&&e.onInput(a);var n=a.target;r.gb.isNotEmpty(n.value)?r.p7.addClass(n,"p-filled"):r.p7.removeClass(n,"p-filled")}})),u&&l.createElement(s.u,i({target:n,content:e.tooltip},e.tooltipOptions)))})));t.displayName="InputTextarea",t.defaultProps={__TYPE:"InputTextarea",autoResize:!1,tooltip:null,tooltipOptions:null,onInput:null}}}]);
//# sourceMappingURL=1945.40ec2725.chunk.js.map