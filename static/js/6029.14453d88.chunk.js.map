{"version":3,"file":"static/js/6029.14453d88.chunk.js","mappings":"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","sources":["hooks/useAddPage.js","pages/tbl_bidang_study/Add.js"],"sourcesContent":["import { useState, useMemo } from \"react\";\r\nimport useApp from 'hooks/useApp';\r\nimport { useQueryClient, useMutation } from 'react-query';\r\nimport useApi from 'hooks/useApi';\r\nimport { confirmDialog } from 'primereact/confirmdialog';\r\nconst useAddPage = ({ props, formDefaultValues, afterSubmit }) => {\r\n\tconst app = useApp();\r\n\tconst api = useApi();\r\n\tconst [pageReady] = useState(true);\r\n\tconst contextFormData = app.getPageFormData(props.pageName); // from data from store\r\n\tconst propsFormData = props.formData; // when form default values is passed by component props\r\n\tconst computedFormData = { ...formDefaultValues, ...propsFormData, ...contextFormData };\r\n\tconst [formData, setFormData] = useState(computedFormData);\r\n\tconst queryClient = useQueryClient();\r\n\tconst mutation = useMutation(saveFormData, {\r\n\t\tretry: false,\r\n\t\tonSuccess: (data) => {\r\n\t\t\tqueryClient.invalidateQueries(props.pageName);\r\n\t\t\tif (afterSubmit) {\r\n\t\t\t\tafterSubmit(data);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonError: (error) => {\r\n\t\t\tapp.showPageRequestError(error);\r\n\t\t},\r\n\t});\r\n\tfunction resetForm() {\r\n\t\tsetFormData(computedFormData);\r\n\t}\r\n\tfunction handleSubmit(e, formik) {\r\n\t\tif (!formik.isValid) {\r\n\t\t\tapp.flashMsg(props.formValidationError, props.formValidationMsg, \"error\");\r\n\t\t}\r\n\t}\r\n\tfunction saveFormData(formValues) {\r\n\t\tconst url = props.apiPath;\r\n\t\tlet postData;\r\n\t\tif (Array.isArray(formValues)) {\r\n\t\t\tpostData = formValues.map(form => normalizeFormData(form));\r\n\t\t}\r\n\t\telse {\r\n\t\t\tpostData = normalizeFormData(formValues)\r\n\t\t}\r\n\t\treturn api.post(url, postData).then((res) => res?.data);\r\n\t}\r\n\tfunction normalizeFormData(formValues) {\r\n\t\tconst postData = { ...formValues }\r\n\t\tObject.keys(postData).forEach(function (key) {\r\n\t\t\tconst fieldValue = postData[key];\r\n\t\t\tif (Array.isArray(fieldValue)) {\r\n\t\t\t\tlet firstItem = fieldValue[0];\r\n\t\t\t\tif(firstItem && typeof firstItem == \"string\"){\r\n\t\t\t\t\tpostData[key] = fieldValue.toString();\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tpostData[key] = fieldValue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (fieldValue instanceof Date) {\r\n\t\t\t\tpostData[key] = fieldValue.toISOString().slice(0, 19).replace('T', ' ');\r\n\t\t\t}\r\n\t\t\telse if(fieldValue === ''){\r\n\t\t\t\tpostData[key] = null;\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn postData;\r\n\t}\r\n\tfunction submitForm(validatedFormData) {\r\n\t\tlet confirmMsg = props.msgBeforeSave;\r\n\t\tif (confirmMsg) {\r\n\t\t\tconfirmDialog({\r\n\t\t\t\theader: props.msgTitle,\r\n\t\t\t\tmessage: confirmMsg,\r\n\t\t\t\ticon: 'pi pi-save',\r\n\t\t\t\taccept: async () => {\r\n\t\t\t\t\tmutation.mutate(validatedFormData);\r\n\t\t\t\t},\r\n\t\t\t\treject: () => {\r\n\t\t\t\t\t//callback to execute when user rejects the action\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\telse {\r\n\t\t\tmutation.mutate(validatedFormData);\r\n\t\t}\r\n\t}\r\n\tfunction inputClassName(hasError, className = 'w-full') {\r\n\t\tif (hasError) {\r\n\t\t\treturn `${className} p-invalid`;\r\n\t\t}\r\n\t\treturn className;\r\n\t}\r\n\tconst pageData = {\r\n\t\tsetFormData,\r\n\t\tsubmitForm,\r\n\t\tinputClassName,\r\n\t\tresetForm,\r\n\t\thandleSubmit,\r\n\t\tformData,\r\n\t\tpageReady,\r\n\t\tsaving: mutation.isLoading,\r\n\t}\r\n\treturn useMemo(() => pageData,\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t\t[formData, pageReady, mutation.isLoading]\r\n\t);\r\n}\r\nexport default useAddPage","import { Formik, Form, ErrorMessage } from 'formik';\r\nimport * as yup from 'yup';\r\nimport { Button } from 'primereact/button';\r\nimport { InputText } from 'primereact/inputtext';\r\nimport { ProgressSpinner } from 'primereact/progressspinner';\r\nimport { Title } from 'components/Title';\r\nimport useApp from 'hooks/useApp';\r\n\r\nimport useAddPage from 'hooks/useAddPage';\r\nconst TblBidangStudyAddPage = (props) => {\r\n\t\tconst app = useApp();\r\n\t\r\n\t//form validation rules\r\n\tconst validationSchema = yup.object().shape({\r\n\t\tnama_bidang: yup.string().required().label(\"Mapel\")\r\n\t});\r\n\t\r\n\t//form default values\r\n\tconst formDefaultValues = {\r\n\t\tnama_bidang: '', \r\n\t}\r\n\t\r\n\t//page hook where logics resides\r\n\tconst pageController =  useAddPage({ props, formDefaultValues, afterSubmit });\r\n\t\r\n\t// destructure and grab what the page needs\r\n\tconst { formData, resetForm, handleSubmit, submitForm, pageReady, loading, saving, inputClassName } = pageController;\r\n\t\r\n\t//event raised after form submit\r\n\tfunction afterSubmit(response){\r\n\t\tapp.flashMsg(props.msgTitle, props.msgAfterSave);\r\n\t\tresetForm();\r\n\t\tif(app.isDialogOpen()){\r\n\t\t\tapp.closeDialogs(); // if page is open as dialog, close dialog\r\n\t\t}\r\n\t\telse if(props.redirect) {\r\n\t\t\tapp.navigate(`/tbl_bidang_study`);\r\n\t\t}\r\n\t}\r\n\t\r\n\t// page loading form data from api\r\n\tif(loading){\r\n\t\treturn (\r\n\t\t\t<div className=\"p-3 text-center\">\r\n\t\t\t\t<ProgressSpinner style={{width:'50px', height:'50px'}} />\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\t\r\n\t//page has loaded any required data and ready to render\r\n\tif(pageReady){\r\n\t\treturn (\r\n<main id=\"TblBidangStudyAddPage\" className=\"main-page\">\r\n    { (props.showHeader) && \r\n    <section className=\"page-section mb-3\" >\r\n        <div className=\"container\">\r\n            <div className=\"grid align-items-center\">\r\n                { !props.isSubPage && \r\n                <div className=\"col-fixed \" >\r\n                    <Button onClick={() => app.navigate(-1)} label=\"\"  className=\"p-button p-button-text \" icon=\"pi pi-arrow-left\"  />\r\n                </div>\r\n                }\r\n                <div className=\"col \" >\r\n                    <Title title=\"Tambah Mapel\"   titleClass=\"text-2xl text-primary font-bold\" subTitleClass=\"text-sm text-500\"      separator={false} />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </section>\r\n    }\r\n    <section className=\"page-section \" >\r\n        <div className=\"container\">\r\n            <div className=\"grid \">\r\n                <div className=\"md:col-9 sm:col-12 comp-grid\" >\r\n                    <div >\r\n                        <Formik initialValues={formData} validationSchema={validationSchema} onSubmit={(values, actions) =>submitForm(values)}>\r\n                            {(formik) => \r\n                            <>\r\n                            <Form className={`${!props.isSubPage ? 'card ' : ''}`}>\r\n                                <div className=\"grid\">\r\n                                    <div className=\"col-12\">\r\n                                        <div className=\"formgrid grid\">\r\n                                            <div className=\"col-12 md:col-3\">\r\n                                                Mapel *\r\n                                            </div>\r\n                                            <div className=\"col-12 md:col-9\">\r\n                                                <InputText name=\"nama_bidang\"  onChange={formik.handleChange}  value={formik.values.nama_bidang}   label=\"Mapel\" type=\"text\" placeholder=\"Mata Pelajaran\"        className={inputClassName(formik?.errors?.nama_bidang)} />\r\n                                                <ErrorMessage name=\"nama_bidang\" component=\"span\" className=\"p-error\" />\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                { props.showFooter && \r\n                                <div className=\"text-center my-3\">\r\n                                    <Button onClick={(e) => handleSubmit(e, formik)} className=\"p-button-primary\" type=\"submit\" label=\"Simpan\" icon=\"pi pi-send\" loading={saving} />\r\n                                </div>\r\n                                }\r\n                            </Form>\r\n                            </>\r\n                            }\r\n                            </Formik>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </section>\r\n    </main>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n//page props and default values\r\nTblBidangStudyAddPage.defaultProps = {\r\n\tprimaryKey: 'id_bidang',\r\n\tpageName: 'tbl_bidang_study',\r\n\tapiPath: 'tbl_bidang_study/add',\r\n\trouteName: 'tbl_bidang_studyadd',\r\n\tsubmitButtonLabel: \"Simpan\",\r\n\tformValidationError: \"Form is invalid\",\r\n\tformValidationMsg: \"Please complete the form\",\r\n\tmsgTitle: 'Create Record',\r\n\tmsgAfterSave: \"Data Berhasil Di Simpan !\",\r\n\tmsgBeforeSave: \"\",\r\n\tshowHeader: true,\r\n\tshowFooter: true,\r\n\tredirect: true,\r\n\tisSubPage: false\r\n}\r\nexport default TblBidangStudyAddPage;\r\n"],"names":["props","formDefaultValues","afterSubmit","app","useApp","api","useApi","useState","pageReady","contextFormData","getPageFormData","pageName","propsFormData","formData","computedFormData","setFormData","queryClient","useQueryClient","mutation","useMutation","formValues","postData","url","apiPath","Array","isArray","map","form","normalizeFormData","post","then","res","data","retry","onSuccess","invalidateQueries","onError","error","showPageRequestError","Object","keys","forEach","key","fieldValue","firstItem","toString","Date","toISOString","slice","replace","pageData","submitForm","validatedFormData","confirmMsg","msgBeforeSave","confirmDialog","header","msgTitle","message","icon","accept","mutate","reject","inputClassName","hasError","className","resetForm","handleSubmit","e","formik","isValid","flashMsg","formValidationError","formValidationMsg","saving","isLoading","useMemo","TblBidangStudyAddPage","validationSchema","yup","shape","nama_bidang","required","label","pageController","useAddPage","response","msgAfterSave","isDialogOpen","closeDialogs","redirect","navigate","loading","style","width","height","id","showHeader","isSubPage","onClick","title","titleClass","subTitleClass","separator","initialValues","onSubmit","values","actions","name","onChange","handleChange","value","type","placeholder","errors","component","showFooter","defaultProps","primaryKey","routeName","submitButtonLabel"],"sourceRoot":""}