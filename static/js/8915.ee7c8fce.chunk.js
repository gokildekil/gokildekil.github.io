"use strict";(self.webpackChunkpiket=self.webpackChunkpiket||[]).push([[8915],{7842:function(e,a,i){var s=i(4165),r=i(5861),n=i(1413),t=i(885),o=i(2791),l=i(4018),c=i(1933),d=i(4072),m=i(4621);a.Z=function(e){var a=e.props,i=e.formDefaultValues,u=e.afterSubmit,p=(0,l.Z)(),h=(0,d.Z)(),v=(0,o.useState)(!0),f=(0,t.Z)(v,1)[0],g=p.getPageFormData(a.pageName),x=a.formData,j=(0,n.Z)((0,n.Z)((0,n.Z)({},i),x),g),N=(0,o.useState)(j),b=(0,t.Z)(N,2),S=b[0],y=b[1],P=(0,c.useQueryClient)(),Z=(0,c.useMutation)((function(e){var i,s=a.apiPath;i=Array.isArray(e)?e.map((function(e){return C(e)})):C(e);return h.post(s,i).then((function(e){return null===e||void 0===e?void 0:e.data}))}),{retry:!1,onSuccess:function(e){P.invalidateQueries(a.pageName),u&&u(e)},onError:function(e){p.showPageRequestError(e)}});function C(e){var a=(0,n.Z)({},e);return Object.keys(a).forEach((function(e){var i=a[e];if(Array.isArray(i)){var s=i[0];a[e]=s&&"string"==typeof s?i.toString():i}else i instanceof Date?a[e]=i.toISOString().slice(0,19).replace("T"," "):""===i&&(a[e]=null)})),a}var w={setFormData:y,submitForm:function(e){var i=a.msgBeforeSave;i?(0,m.V)({header:a.msgTitle,message:i,icon:"pi pi-save",accept:function(){var a=(0,r.Z)((0,s.Z)().mark((function a(){return(0,s.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:Z.mutate(e);case 1:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),reject:function(){}}):Z.mutate(e)},inputClassName:function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"w-full";return e?"".concat(a," p-invalid"):a},resetForm:function(){y(j)},handleSubmit:function(e,i){i.isValid||p.flashMsg(a.formValidationError,a.formValidationMsg,"error")},formData:S,pageReady:f,saving:Z.isLoading};return(0,o.useMemo)((function(){return w}),[S,f,Z.isLoading])}},8915:function(e,a,i){i.r(a);var s=i(5705),r=i(9562),n=i(919),t=i(8550),o=i(3014),l=i(9025),c=i(2557),d=i(3898),m=i(4018),u=i(7842),p=i(184),h=function(e){var a=(0,m.Z)(),i=r.Ry().shape({permission:r.Z_().required().label("Permission"),role_id:r.Rx().nullable().label("Role Id")}),h=(0,u.Z)({props:e,formDefaultValues:{permission:"",role_id:""},afterSubmit:function(i){a.flashMsg(e.msgTitle,e.msgAfterSave),f(),a.isDialogOpen()?a.closeDialogs():e.redirect&&a.navigate("/permissions")}}),v=h.formData,f=h.resetForm,g=h.handleSubmit,x=h.submitForm,j=h.pageReady,N=h.loading,b=h.saving,S=h.inputClassName;return N?(0,p.jsx)("div",{className:"p-3 text-center",children:(0,p.jsx)(c.G,{style:{width:"50px",height:"50px"}})}):j?(0,p.jsxs)("main",{id:"PermissionsAddPage",className:"main-page",children:[e.showHeader&&(0,p.jsx)("section",{className:"page-section mb-3",children:(0,p.jsx)("div",{className:"container",children:(0,p.jsxs)("div",{className:"grid align-items-center",children:[!e.isSubPage&&(0,p.jsx)("div",{className:"col-fixed ",children:(0,p.jsx)(n.z,{onClick:function(){return a.navigate(-1)},label:"",className:"p-button p-button-text ",icon:"pi pi-arrow-left"})}),(0,p.jsx)("div",{className:"col ",children:(0,p.jsx)(d.D,{title:"Add New Permissions",titleClass:"text-2xl text-primary font-bold",subTitleClass:"text-sm text-500",separator:!1})})]})})}),(0,p.jsx)("section",{className:"page-section ",children:(0,p.jsx)("div",{className:"container",children:(0,p.jsx)("div",{className:"grid ",children:(0,p.jsx)("div",{className:"md:col-9 sm:col-12 comp-grid",children:(0,p.jsx)("div",{children:(0,p.jsx)(s.J9,{initialValues:v,validationSchema:i,onSubmit:function(e,a){return x(e)},children:function(a){var i;return(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)(s.l0,{className:"".concat(e.isSubPage?"":"card "),children:[(0,p.jsxs)("div",{className:"grid",children:[(0,p.jsx)("div",{className:"col-12",children:(0,p.jsxs)("div",{className:"formgrid grid",children:[(0,p.jsx)("div",{className:"col-12 md:col-3",children:"Permission *"}),(0,p.jsxs)("div",{className:"col-12 md:col-9",children:[(0,p.jsx)(l.o,{name:"permission",onChange:a.handleChange,value:a.values.permission,label:"Permission",type:"text",placeholder:"Enter Permission",className:S(null===a||void 0===a||null===(i=a.errors)||void 0===i?void 0:i.permission)}),(0,p.jsx)(s.Bc,{name:"permission",component:"span",className:"p-error"})]})]})}),(0,p.jsx)("div",{className:"col-12",children:(0,p.jsxs)("div",{className:"formgrid grid",children:[(0,p.jsx)("div",{className:"col-12 md:col-3",children:"Role Id"}),(0,p.jsx)("div",{className:"col-12 md:col-9",children:(0,p.jsx)(t.o,{apiPath:"components_data/role_id_option_list",children:function(e){var i,r=e.response;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(o.L,{name:"role_id",optionLabel:"label",optionValue:"value",value:a.values.role_id,onChange:a.handleChange,options:r,label:"Role Id",placeholder:"Select a value ...",className:S(null===a||void 0===a||null===(i=a.errors)||void 0===i?void 0:i.role_id)}),(0,p.jsx)(s.Bc,{name:"role_id",component:"span",className:"p-error"})]})}})})]})})]}),e.showFooter&&(0,p.jsx)("div",{className:"text-center my-3",children:(0,p.jsx)(n.z,{onClick:function(e){return g(e,a)},className:"p-button-primary",type:"submit",label:"Simpan",icon:"pi pi-send",loading:b})})]})})}})})})})})})]}):void 0};h.defaultProps={primaryKey:"permission_id",pageName:"permissions",apiPath:"permissions/add",routeName:"permissionsadd",submitButtonLabel:"Simpan",formValidationError:"Form is invalid",formValidationMsg:"Please complete the form",msgTitle:"Create Record",msgAfterSave:"Data Berhasil Di Simpan !",msgBeforeSave:"",showHeader:!0,showFooter:!0,redirect:!0,isSubPage:!1},a.default=h}}]);
//# sourceMappingURL=8915.ee7c8fce.chunk.js.map